<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>api</title>
  <!-- 代码高亮 -->
  <link rel="stylesheet" href="./assets/highlight/styles/arta.css">
  <!-- <link rel="stylesheet" href="./assets/highlight/styles/agate.css"> -->

  <script src="./assets/highlight/highlight.pack.js"></script>
  <script>hljs.highlightAll();</script>
  <!-- bootstrap -->
  <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
  <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="./assets/css/bootstrap-v4.1.3.min.css">
  <!-- 知识图谱 -->
  <link rel="stylesheet" href="./assets/css/d3.css">
  <!-- 其他css -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Poppins:wght@300;400;500;600&display=swap">
  <link rel="stylesheet" href="./assets/css/flaticon.css">
  <link rel="stylesheet" href="./assets/css/style2.css">

</head>

<body>
  <section class="blog-details-page pt-125 pb-120" style="background-color: #F5f4f4;">
    <div class="container">
      <div class="row" style="margin-bottom: 20px;">
        <div class="col-lg-8 " style="margin:auto;">
          <div class="widget widget_search" style="margin-bottom: 20px;">
            <form action="#" _lpchecked="1">
              <input type="text" placeholder="Search...." required="">
              <button type="submit"><i class="flaticon-search"></i></button>
            </form>
          </div>
          <div class="tags">
            <span> 相关搜索：</span>
            <a href="#">state-checking</a>
            <a href="#">value-checking</a>
            <a href="#">call-order trigger</a>
            <a href="#">trigger</a>
            <a href="#">duplicate-checking</a>
          </div>
        </div>
      </div>
      <div class="blog-item row kg">

        <div class="col-lg-12">
          <p class="widget-title ">API：org.apache.commons.lang.text.StrBuilder</p>
        </div>

        <!-- 第一种api -->

        <div class="col-lg-6 ">
          <a class="pull-left" style="margin:0 auto;">blabla</a>
        </div>
        <div class="col-lg-6 pad0">
          <a class="pull-left">代码种类：5</a>
        </div>
        <div class="row api-list">
          <div class="col-lg-5 pad0">
            <div class=" blog-content " height="400">
              <div class="kg" height="300">
                <div class="name-date " style="height: 40px;">
                  <p>误用类型:<span class="date">state-checking</span></p>
                </div>
                <!-- 图谱 -->
                <svg width="400" height="200" id="svg1">
                </svg>

                <div class="node-info " style="height: 25px;">
                  <p> 头结点:<span class="date">state-checking</span></p>
                </div>
                <div class="node-info " style="height: 25px;">
                  <p>尾部节点:<span class="date">state-checking</span></p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-1 pad0" style="width: 5px;">
            <img style="margin-top:100px" src="./assets/icon/未标题-1.png">
          </div>
          <div class=" col-lg-6 code pad0">
            <div class="blog-content">
              <div id="demo" class="carousel slide" data-ride="carousel">
                <!-- 轮播 -->
                <div class="carousel-inner ">
                  <div class="carousel-item active">

                    <!-- java代码展示 -->
                    <pre><code class="lang-java" id="code1_1">
  import org.apache.commons.lang.text.StrBuilder;

  class NullTextNull extends StrBuilder {
  void pattern(Object obj) {
      String str = (obj == null ? this.getNullText() : obj.toString());
      if (str != null) {
      str.length();
      }
  }
  }
                              </code></pre>
                  </div>
                  <div class="carousel-item">
                    <pre><code class="lang-java" id="code1_2">
  import java.util.*;
  public class Main {
      public static void main(String args[]){
          Scanner scanner=new Scanner(System.in);
          int n=scanner.nextInt();
          int x=scanner.nextInt();
          int y=scanner.nextInt();
          int[] xl=new int[n];
          int[] yl=new int[n];

  }
                              </code></pre>
                  </div>
                  <div class="carousel-item">
                    <pre><code class="lang-java" id="code1_3">

  import org.apache.commons.lang.text.StrBuilder;

  class NullTextNull extends StrBuilder {
      void pattern(Object obj) {
      String str = (obj == null ? this.getNullText() : obj.toString());
      if (str != null) {
          str.length();
      }
      }
  }
                            </code></pre>
                  </div>
                </div>
                <ul class="carousel-indicators ">
                  <li data-target="#demo" data-slide-to="0" class="active"></li>
                  <li data-target="#demo" data-slide-to="1"></li>
                  <li data-target="#demo" data-slide-to="2"></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <!-- 第二种 API-->
        <div class="col-lg-12">
          <p class="widget-title ">API：org.apache.commons.lang.text.StrBuilder</p>
        </div>


        <div class="col-lg-6 ">
          <a class="pull-left" style="margin-left: 10px;">blabla</a>
        </div>
        <div class="col-lg-6 pad0">
          <a class="pull-left">代码种类：5</a>
        </div>
        <div class="row api-list" style="margin-left: auto;margin-right: auto;">
          <div class="col-lg-5 pad0">

            <div class=" blog-content " height="400">

              <div class="kg" height="300">
                <div class="name-date " style="height: 40px;">
                  <p>误用类型:<span class="date">state-checking</span></p>
                </div>
                <svg width="400" height="200" id="svg2">
                </svg>

                <div class="node-info " style="height: 25px;">
                  <p> 头结点:<span class="date">state-checking</span></p>
                </div>
                <div class="node-info " style="height: 25px;">
                  <p>尾部节点:<span class="date">state-checking</span></p>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-1 pad0" style="width: 10px;">
            <img style="margin-top:100px" src="./assets/icon/未标题-1.png">
          </div>
          <div class=" col-lg-6 code pad0">
            <div class="blog-content">
              <div id="demo1" class="carousel slide" data-ride="carousel">

                <!-- 轮播图片 -->
                <div class="carousel-inner ">
                  <div class="carousel-item active">

                    <!-- 代码 -->
                    <pre><code class="lang-java" id="code2_1">
  import java.util.*;

  public class Q20_09_1 {
      public static void main(String args[]){
          Scanner scanner=new Scanner(System.in);
          int n=scanner.nextInt();
          int x=scanner.nextInt();
          int y=scanner.nextInt();
          int[] xl=new int[n];
          int[] yl=new int[n];

  }

                                              </code></pre>

                  </div>
                  <div class="carousel-item">

                    <pre><code class="lang-java" id="code2_2">
  import org.apache.commons.lang.text.StrBuilder;

  class NullTextNull extends StrBuilder {
  void pattern(Object obj) {
      String str = (obj == null ? this.getNullText() : obj.toString());
      if (str != null) {
      str.length();
      }
  }
  }
                                                                    </code></pre>
                  </div>
                  <div class="carousel-item">

                    <pre><code class="lang-java" id="code2_3">

  import org.apache.commons.lang.text.StrBuilder;

  class NullTextNull extends StrBuilder {
      void pattern(Object obj) {
      String str = (obj == null ? this.getNullText() : obj.toString());
      if (str != null) {
          str.length();
      }
      }
  }
                                                                    </code></pre>
                  </div>
                </div>


                <!-- 指示符 -->
                <ul class="carousel-indicators ">
                  <li data-target="#demo1" data-slide-to="0" class="active"></li>
                  <li data-target="#demo1" data-slide-to="1"></li>
                  <li data-target="#demo1" data-slide-to="2"></li>
                </ul>
              </div>

            </div>

          </div>
        </div>
        <!-- 第二种结束 -->
        <!--  分页框 -->
        <ul class="pagination d-inline-block">
          <li><a href="#"><span class="flaticon-left-arrow"></span></a></li>
          <li class="current"><a href="#">1</a></li>
          <li><a href="#">2</a></li>

          <li><a href="#"><span class="flaticon-right-arrow"></span></a></li>
        </ul>

      </div>
    </div>
  </section>
</body>

<!-- 增加D3元素库 -->
<script src="https://d3js.org/d3.v4.min.js"></script>
<!-- 补充JS代码 -->
<script type="text/javascript">

  //代码列表
  var codeList = [
    ["https://www.baidu.com/", "https://www.baidu.com/", "https://www.baidu.com/"],
    ["https://github.com/", "https://github.com/", "https://github.com/"]
  ]

  //添加鼠标点击事件
  var timmerHandle = null;
  var isDrag = false;
  function setDragTrue() {
    isDrag = true;
  }
  for (let i = 0; i < codeList.length; i++) {
    let urlList = codeList[i];

    for (let j = 0; j < urlList.length; j++) {
      let id = 'code' + (i + 1) + '_' + (j + 1);

      document.getElementById(id).addEventListener('mousedown', function () {
        isDrag = false;
        timmerHandle = setTimeout(setDragTrue, 200)
      })
      document.getElementById(id).addEventListener('mouseup', function () {
        if (!isDrag) {
          clearTimeout(timmerHandle);
          window.open(urlList[j]);
        }
      })
    }
    // document.getElementById()
  }


  var nodeList = [
    {
      "links":
        [
          { "source": "getNullText", "value": 9, "target": "length()", "relation": "CallOrder" },
        ],
      "nodes": [{ "id": "getNullText", "size": 16, "group": 1, "class": "film" },
      { "id": "length()", "size": 17, "group": 1, "class": "film" },
      ]
    },
    {
      "links":
        [
          { "source": "getNullText", "value": 9, "target": "length()", "relation": "NullPointerException" },
        ],
      "nodes": [{ "id": "getNullText", "size": 16, "group": 1, "class": "film" },
      { "id": "length()", "size": 17, "group": 1, "class": "film" },
      ]
    },
  ];


  $(function () {
    $('#carousel-example-generic').carousel({
      interval: 5000,
    });
  });
  $(document).ready(function () {
    //定义name变量制作图标
    var names = ['Films', 'Characters', 'Planets', 'Starships', 'Vehicles', 'Species'];
    var colors = ['#b3d38c', '#b3d38c', '#b3d38c', '#b3d38c', '#b3d38c', '#b3d38c'];

    //定义svg变量将布局svg1选出来 
    for (let k = 1; k <= 2; k++) {
      let id = '#svg' + k;
      console.log(id);
      let svg = d3.select(id),
        width = svg.attr("width"),
        height = svg.attr("height");

      //背景颜色设置 补充CSS样式设置字体布局
      for (var i = 0; i < names.length; i++) {
        $('#indicator').append("<div><span style='background-color:" + colors[i] + "'></span>" + names[i] + "</div>");
      }

      //利用d3.forceSimulation()定义关系图 包括设置边link、排斥电荷charge、关系图中心点
      let simulation = d3.forceSimulation()
        .force("link", d3.forceLink().id(function (d) {
          return d.id;
        }))
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, height / 2));

      simulation.force('charge')
        .strength(-10500) // 排斥力强度，正值相互吸引，负值相互排斥
      //存储关系图的数据
      let graph;
      //定义d3.json请求python处理好的节点及边
      graph = nodeList[k - 1];
      console.log(graph);

      let link = svg.append("g").attr("class", "links").selectAll("line").data(graph.links).enter()
        .append("line").attr("stroke-width", function (d) {
          return 1;
        });

      let node = svg.append("g").attr("class", "nodes").selectAll("circle").data(graph.nodes).enter()
        .append("circle").attr("r", function (d) {
          return d.size;
        }).attr("fill", function (d) {
          return colors[d.group];
        }).attr("stroke", "none").attr("name", function (d) {
          return d.id;
        }).call(d3.drag()
          .on("start", function (d) {
            if (!d3.event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
          })
          .on("drag", function (d) {
            d.fx = d3.event.x;
            d.fy = d3.event.y;
          })
          .on("end", function (d) {
            if (!d3.event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
          })
        );

      let text = svg.append("g").attr("class", "texts").selectAll("text").data(graph.nodes)
        .enter()
        .append("text").attr("font-size", function (d) {
          return "100px";
        }).attr("fill", function (d) {
          return "#222222";
        }).attr('name', function (d) {
          return d.id;
        }).text(function (d) {
          return d.id;
        }).attr('text-anchor', 'middle').call(d3.drag()
          .on("start", function (d) {
            if (!d3.event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
          })
          .on("drag", function (d) {
            d.fx = d3.event.x;
            d.fy = d3.event.y;
          })
          .on("end", function (d) {
            if (!d3.event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
          })
        );


      let linksText = svg.append("g").append("g").attr("class", "texts")
        .selectAll("text")
        .attr("font-size", function (d) {
          return 20;
        })
        .data(graph.links)
        .enter()
        .append("text")
        .style("fill", "#222222")
        .text(function (d) {
          return d.relation;
        });

      //圆增加title
      node.append("title").text(function (d) {
        return d.id;
      })

      //simulation中ticked数据初始化并生成图形
      simulation
        .nodes(graph.nodes)
        .on("tick", function () {
          link
            .attr("x1", function (d) {
              return d.source.x;
            })
            .attr("y1", function (d) {
              return d.source.y;
            })
            .attr("x2", function (d) {
              return d.target.x;
            })
            .attr("y2", function (d) {
              return d.target.y;
            });

          node
            .attr("cx", function (d) {
              return d.x;
            })
            .attr("cy", function (d) {
              return d.y;
            });

          text.
            attr('transform', function (d) {
              return 'translate(' + d.x + ',' + (d.y + d.size / 2) + ')';
            });

          linksText
            .attr("x", function (d) {
              return (d.source.x + d.target.x) / 2;
            })
            .attr("y", function (d) {
              return (d.source.y + d.target.y) / 2;
            });
        });

      simulation.force("link")
        .links(graph.links);
    }
    //ticked()函数确定link线的起始点x、y坐标 node确定中心点 文本通过translate平移变化
    function ticked() {
      link
        .attr("x1", function (d) {
          return d.source.x;
        })
        .attr("y1", function (d) {
          return d.source.y;
        })
        .attr("x2", function (d) {
          return d.target.x;
        })
        .attr("y2", function (d) {
          return d.target.y;
        });

      node
        .attr("cx", function (d) {
          return d.x;
        })
        .attr("cy", function (d) {
          return d.y;
        });

      text.
        attr('transform', function (d) {
          return 'translate(' + d.x + ',' + (d.y + d.size / 2) + ')';
        });

      linksText
        .attr("x", function (d) {
          return (d.source.x + d.target.x) / 2;
        })
        .attr("y", function (d) {
          return (d.source.y + d.target.y) / 2;
        });

    }





  });
</script>

</html>